{
  "name": "RAG",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "initialMessages": "Halo! ðŸ‘‹  \nSilakan upload atau pilih file PDF, lalu tanyakan apa pun tentang isi dokumen tersebut.\nSaya bisa membantu meringkas, menjelaskan, atau mengambil poin penting dari PDF Anda.\n",
        "options": {
          "subtitle": "Asisten Analisis Dokumen PDF",
          "title": "PDF Assistant ðŸ¤–",
          "customCss": ":root {\n  /* ================= COLORS ================= */\n  --chat--color-primary: #CB39C6;\n  --chat--color-primary-shade-50: #B933B4;\n  --chat--color-primary-shade-100: #A72DA2;\n\n  --chat--color-secondary: #CB39C6;\n  --chat--color-secondary-shade-50: #B933B4;\n\n  --chat--color-white: #ffffff;\n  --chat--color-light: #f6f1f7;\n  --chat--color-light-shade-50: #ebe2ee;\n  --chat--color-light-shade-100: #d6c4db;\n\n  --chat--color-medium: #d9c7dd;\n  --chat--color-dark: #2b0f2a;\n  --chat--color-disabled: #8a8a8a;\n  --chat--color-typing: #4a4a4a;\n\n  /* ================= BASE ================= */\n  --chat--spacing: 1rem;\n  --chat--border-radius: 0.25rem;\n  --chat--transition-duration: 0.15s;\n  --chat--font-family: (\n    -apple-system,\n    BlinkMacSystemFont,\n    'Segoe UI',\n    Roboto,\n    Oxygen-Sans,\n    Ubuntu,\n    Cantarell,\n    'Helvetica Neue',\n    sans-serif\n  );\n\n  /* ================= WINDOW ================= */\n  --chat--window--width: 400px;\n  --chat--window--height: 600px;\n  --chat--window--bottom: var(--chat--spacing);\n  --chat--window--right: var(--chat--spacing);\n  --chat--window--z-index: 9999;\n  --chat--window--border: 1px solid var(--chat--color-light-shade-50);\n  --chat--window--border-radius: var(--chat--border-radius);\n  --chat--window--margin-bottom: var(--chat--spacing);\n\n  /* ================= HEADER ================= */\n  --chat--header-height: auto;\n  --chat--header--padding: var(--chat--spacing);\n  --chat--header--background: var(--chat--color-primary);\n  --chat--header--color: var(--chat--color-white);\n  --chat--header--border-top: none;\n  --chat--header--border-bottom: none;\n  --chat--header--border-left: none;\n  --chat--header--border-right: none;\n  --chat--heading--font-size: 2em;\n  --chat--subtitle--font-size: inherit;\n  --chat--subtitle--line-height: 1.8;\n\n  /* ================= MESSAGE ================= */\n  --chat--message--font-size: 1rem;\n  --chat--message--padding: var(--chat--spacing);\n  --chat--message--border-radius: var(--chat--border-radius);\n  --chat--message-line-height: 1.5;\n  --chat--message--margin-bottom: var(--chat--spacing);\n  --chat--message--bot--background: var(--chat--color-white);\n  --chat--message--bot--color: var(--chat--color-dark);\n  --chat--message--bot--border: none;\n  --chat--message--user--background: var(--chat--color-primary);\n  --chat--message--user--color: var(--chat--color-white);\n  --chat--message--user--border: none;\n  --chat--message--pre--background: rgba(0, 0, 0, 0.05);\n  --chat--messages-list--padding: var(--chat--spacing);\n\n  /* ================= TOGGLE ================= */\n  --chat--toggle--size: 64px;\n  --chat--toggle--width: var(--chat--toggle--size);\n  --chat--toggle--height: var(--chat--toggle--size);\n  --chat--toggle--border-radius: 50%;\n  --chat--toggle--background: var(--chat--color-primary);\n  --chat--toggle--hover--background: var(--chat--color-primary-shade-50);\n  --chat--toggle--active--background: var(--chat--color-primary-shade-100);\n  --chat--toggle--color: var(--chat--color-white);\n\n  /* ================= INPUT ================= */\n  --chat--textarea--height: 50px;\n  --chat--textarea--max-height: 30rem;\n  --chat--input--font-size: inherit;\n  --chat--input--border: 0;\n  --chat--input--border-radius: 0;\n  --chat--input--padding: 0.8rem;\n  --chat--input--background: var(--chat--color-white);\n  --chat--input--text-color: initial;\n  --chat--input--line-height: 1.5;\n  --chat--input--placeholder--font-size: var(--chat--input--font-size);\n  --chat--input--border-active: 0;\n  --chat--input--left--panel--width: 2rem;\n\n  /* ================= BUTTON ================= */\n  --chat--button--color: var(--chat--color-white);\n  --chat--button--background: var(--chat--color-primary);\n  --chat--button--padding: calc(var(--chat--spacing) / 2) var(--chat--spacing);\n  --chat--button--border-radius: var(--chat--border-radius);\n  --chat--button--hover--color: var(--chat--color-white);\n  --chat--button--hover--background: var(--chat--color-primary-shade-50);\n  --chat--close--button--color-hover: var(--chat--color-primary);\n\n  /* ================= SEND & FILE ================= */\n  --chat--input--send--button--background: var(--chat--color-white);\n  --chat--input--send--button--color: var(--chat--color-primary);\n  --chat--input--send--button--background-hover: var(--chat--color-primary-shade-50);\n  --chat--input--send--button--color-hover: var(--chat--color-white);\n\n  --chat--input--file--button--background: var(--chat--color-white);\n  --chat--input--file--button--color: var(--chat--color-primary);\n  --chat--input--file--button--background-hover: var(--chat--color-white);\n  --chat--input--file--button--color-hover: var(--chat--color-primary-shade-50);\n\n  --chat--files-spacing: 0.25rem;\n\n  /* ================= BODY ================= */\n  --chat--body--background: var(--chat--color-light);\n  --chat--footer--background: var(--chat--color-light);\n  --chat--footer--color: var(--chat--color-dark);\n}\n\n/* Custom override */\n.chat-message {\n  max-width: 50%;\n}\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -832,
        -224
      ],
      "id": "db4586f8-db47-4a7b-853b-8eb19e841d1c",
      "name": "When chat message received",
      "webhookId": "a79b8372-e5c7-406e-a523-2a10c181082f"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=kamu adalah asisten virtual\n\nambil jawaban dari tools \"Postgres PGVector Store1\""
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -624,
        -224
      ],
      "id": "ebb104f0-4c14-42e5-8859-e50958dda17c",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -688,
        48
      ],
      "id": "da7bc6ff-021b-4f14-96e7-3878b7b6274b",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "lKJTjXvuoL8oFhZZ",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        -528,
        32
      ],
      "id": "85011e35-b0b5-4572-ab75-e098e1b0a082",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "JY9hPT9io1G9upDf",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "jawab pertanyaan dari data ",
        "tableName": "documents",
        "options": {
          "columnNames": {
            "values": {
              "contentColumnName": "content"
            }
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        -224,
        -176
      ],
      "id": "33a38248-2ca1-4519-9142-fe2a2e6df79e",
      "name": "Postgres PGVector Store1",
      "credentials": {
        "postgres": {
          "id": "JY9hPT9io1G9upDf",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -224,
        32
      ],
      "id": "bb193b73-8cee-4f86-8e68-72f1181a1709",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "lKJTjXvuoL8oFhZZ",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "",
        "height": 224,
        "width": 1072,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -992,
        -272
      ],
      "id": "384ba9d1-8d25-4b06-9a8d-d94f2fd2ef38",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "",
        "height": 224,
        "width": 1072,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -992,
        -32
      ],
      "id": "834d2807-08bc-448c-a7cf-d76faefd71d5",
      "name": "Sticky Note1"
    }
  ],
  "pinData": {},
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Postgres PGVector Store1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "b749dda7-9909-4b62-a868-9f48f70ac901",
  "meta": {
    "instanceId": "dfd7981dba010e448896c847639c7c03d2af91d0905ddc4815d9e2723ec19f35"
  },
  "id": "wZ7ypHecxbinti4o",
  "tags": []
}